// Load TinyMCE from official CDN with API key
(function() {
  const apiKey = 'f05biaod4kou49jaqhin0gpvhmzxkysw6zbhsknadhzqdpp3';
  
  // Create script element to load TinyMCE
  const script = document.createElement('script');
  script.src = `https://cdn.tiny.cloud/1/${apiKey}/tinymce/6/tinymce.min.js`;
  script.referrerPolicy = 'origin';
  
  // Handle successful loading
  script.onload = function() {
    console.log("TinyMCE loaded successfully from CDN");
    
    // Add Arabic language support
    if (window.tinymce) {
      // Preload Arabic language file
      const langScript = document.createElement('script');
      langScript.src = `https://cdn.tiny.cloud/1/${apiKey}/tinymce/6/langs/ar.js`;
      document.head.appendChild(langScript);
      
      // Add default RTL settings
      window.tinymce.defaultSettings = {
        directionality: 'rtl',
        language: 'ar',
        branding: false
      };
    }
  };
  
  // Handle loading failure
  script.onerror = function() {
    console.error("Failed to load TinyMCE from CDN - will use fallback editor");
    
    // Create a simple stub implementation for error handling
    window.tinymce = window.tinymce || {
      init: function() {
        console.warn("Using TinyMCE stub implementation - actual editor not loaded");
        return Promise.reject("TinyMCE failed to load");
      }
    };
  };
  
  // Add the script to the document
  document.head.appendChild(script);
})();